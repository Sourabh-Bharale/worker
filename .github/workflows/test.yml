name: PR Comment Trigger

on:
    issue_comment:
        types: [created]

jobs:
    check_pr_comment:
        runs-on: ubuntu-latest
        if: github.event.issue.pull_request
        steps:
            - name: Checkout code
              uses: actions/checkout@v2

            - name: Run Action
              env:
                GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
              run: |
                COMMENT_BODY="${{github.event.comment.body}}"
                COMMENT_URL="${{github.event.comment.html_url}}"
                PR_URL="${{github.event.issue.pull_request.url}}"

            - name: send response to backend
              run: |
                curl -X POST 'https://008vv400-3000.inc1.devtunnels.ms/api/actions/pr' \
                -H 'Content-Type: application/json' \
                -d '{
                  "comment_body": "'"$COMMENT_BODY"'",
                  "comment_url": "'"$COMMENT_URL"'",
                  "pr_url": "'"$PR_URL"'"
                }'

